version: 1.0.0

backend:
	name: context
	exec: /opt/context/tex/texmf-linux-64/bin/context

-- TODO:
--   properties (space-before/after, formatting)
--   _text_ vs _formatted_text_ in text blocks

formatting:
	bold: '{\\bf ' .. _text_ .. ' }'
	italic: '{\\it ' .. _text_ .. ' }'
	font-size:
		<lua code>

styles:

	document:
		layout:
			-- header
			_children_block_
			-- footer
		output:
			"\\setupinteraction[state=start]"
			"\\placebookmarks[chapter,title,section,subsection][chapter,title,section][force=yes]"
			"\\starttext"
			_children_block_
			"\\stoptext"
		default-child-style: paragraph

	new-style:
		name: section
		child-of: document
		type: multi_block
		layout:
			section-title
			_children_block_
		declare:
			start_command =Â "\\startsection"
			stop_command = "\\stopsection"
		output:
			start_command .. "[title={" .. section-title.output .. "}]"
			_children_block_
			stop_command
		default-child-style: paragraph

	new-style:
		name: section-title
		type: text_block
		output:
			_text_

	new-style:
		name: subsection
		child-of: section
		inherits: section
		layout:
			sub-section-title
			_children_block_
		declare:
			start_command = "\\startsubsection"
			stop_command = "\\stopsubsection"

	new-style:
		name: sub-section-title
		type: text_block
		output:
			_text_

	new-style:
		name: paragraph
		type: multiline_text_block
		output:
			"{\\par" .. _text_ .. "}"
