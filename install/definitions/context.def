format-version: 1.0.0

backend:
	name: context
	-- file-extension: .tex
	-- -- environment-file-extension: .tex
	exec: /opt/context/tex/texmf-linux-64/bin/context
		-- '/opt/context/tex/texmf-linux-64/bin/context ' .. _document_backend_name_
	-- viewer: pdf

-- TODO:
--   properties (space-before/after, formatting)
--   _text_ vs _formatted_text_ in text blocks

styles:

	document:
		type: layout_block
		layout:
			header
			_children_
			footer
		output:
			header
			footer
			'\\setupinteraction[state=start]'
			'\\placebookmarks[chapter,title,section,subsection][chapter,title,section][force=yes]'
			'\\starttext'
			_children_
			'\\stoptext'
		default-child-style: paragraph

	style:
		name: paragraph
		type: text_block
		output:
			'{\\par ' .. _text_content_ .. ' }'

	style:
		name: header
		type: text_block
		output:
			'\\setupheadertexts[' .. _text_content_ .. ']'

	style:
		name: footer
		type: text_block
		output:
			'\\setupfootertexts[' .. _text_content_ .. ']'

	style:
		name: section
		child-of: document
		type: layout_block
		layout:
			section_title
			_children_
		output:
			'\\startsection[title={' .. section_title .. '}]'
			_children_
			'\\stopsection'
		default-child-style: paragraph

	style:
		name: section_title
		type: text_block
		output:
			_text_content_
